# ═══════════════════════════════════════════════════════════════
# Optimized Kitty Configuration
# Hybrid Vim-Style + Community Standard Keybindings
# ═══════════════════════════════════════════════════════════════

# ===== FONTS =====
font_family      FiraCode Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        12.0

# ===== APPEARANCE =====
# Theme (Catppuccin Mocha)
include current-theme.conf

# Transparency
background_opacity 0.5
dynamic_background_opacity yes

# Cursor
cursor_shape block
cursor_blink_interval 0

# Window
hide_window_decorations no
window_padding_width 4
window_margin_width 0

# ===== TAB BAR =====
tab_bar_edge top
tab_bar_style powerline
tab_powerline_style slanted
tab_bar_min_tabs 1
tab_title_template "{index}: {title}"
active_tab_font_style bold
# ===== SCROLLBACK =====
scrollback_lines 10000
scrollback_pager_history_size 10

# ===== PERFORMANCE =====
repaint_delay 10
input_delay 3
sync_to_monitor yes

# ═══════════════════════════════════════════════════════════════
# KEYBINDING SCHEME
# Two-layer system:
#   - SUPER: Hyprland (system-wide window management)
#   - CTRL+SHIFT: Kitty tabs and clipboard
#   - CTRL+ALT: Kitty splits (no conflicts with paste!)
#   - CTRL: Kitty split navigation (vim-style HJKL)
# ═══════════════════════════════════════════════════════════════

# Clear default shortcuts (prevents conflicts)
clear_all_shortcuts yes

# ===== TAB MANAGEMENT (Community Standard) =====
# New tab (Browser muscle memory: Ctrl+T)
map ctrl+shift+t new_tab_with_cwd

# Close tab (Browser muscle memory: Ctrl+W)
map ctrl+shift+q close_tab

# Navigate tabs (N=Next, P=Previous)
map ctrl+shift+n next_tab
map ctrl+shift+p previous_tab

# Alternative: Cycle tabs with Tab key (like Alt+Tab)
map ctrl+tab next_tab
map ctrl+shift+tab previous_tab

# Go to specific tab (like browser)
map ctrl+shift+1 goto_tab 1
map ctrl+shift+2 goto_tab 2
map ctrl+shift+3 goto_tab 3
map ctrl+shift+4 goto_tab 4
map ctrl+shift+5 goto_tab 5

# Move tab position
map ctrl+shift+left move_tab_backward
map ctrl+shift+right move_tab_forward

# Rename tab
map ctrl+shift+alt+t set_tab_title

# ===== SPLIT MANAGEMENT (Vim-Style) =====
# Create splits (Vim muscle memory with Alt to avoid paste conflict)
map ctrl+alt+v launch --location=vsplit --cwd=current # Vertical (right)
map ctrl+alt+s launch --location=hsplit --cwd=current  # Horizontal (down)

# Navigate splits (Vim HJKL - NO SHIFT for speed)
map ctrl+h neighboring_window left
map ctrl+j neighboring_window down
map ctrl+k neighboring_window up
map ctrl+l neighboring_window right

# Move window between splits
map ctrl+shift+h move_window left
map ctrl+shift+j move_window down
map ctrl+shift+k move_window up
map ctrl+shift+l move_window right

# Resize splits
map ctrl+shift+r start_resizing_window

# Close current split
map ctrl+shift+w close_window

# ===== SCROLLBACK NAVIGATION =====
# Scroll by line
map ctrl+shift+up scroll_line_up
map ctrl+shift+down scroll_line_down

# Scroll by page
map ctrl+shift+page_up scroll_page_up
map ctrl+shift+page_down scroll_page_down

# Scroll to top/bottom
map ctrl+shift+home scroll_home
map ctrl+shift+end scroll_end

# Open scrollback in pager (less)
map ctrl+shift+h show_scrollback

# ===== CLIPBOARD =====
# Copy to clipboard
map ctrl+shift+c copy_to_clipboard

# Paste from clipboard
map ctrl+shift+v paste_from_clipboard

# Paste from selection (middle-click buffer)
map shift+insert paste_from_selection

# ===== FONT SIZE =====
# Increase font size
map ctrl+shift+equal change_font_size all +1.0
map ctrl+shift+plus change_font_size all +1.0

# Decrease font size
map ctrl+shift+minus change_font_size all -1.0

# Reset font size
map ctrl+shift+backspace change_font_size all 0

# ===== MISCELLANEOUS =====
# Reload config
map ctrl+shift+f5 load_config_file

# Toggle fullscreen
map ctrl+shift+f11 toggle_fullscreen

# Clear terminal (without scrollback)
map ctrl+l send_text normal,application \x0c

# ═══════════════════════════════════════════════════════════════
# MOUSE CONFIGURATION
# ═══════════════════════════════════════════════════════════════

# Click URL to open
mouse_map left click ungrabbed mouse_handle_click selection link prompt

# Right-click paste
mouse_map right press ungrabbed paste_from_selection

# Middle-click paste
mouse_map middle release ungrabbed paste_from_selection

# ===== URL HANDLING =====
url_style curly
open_url_with default
detect_urls yes

# ═══════════════════════════════════════════════════════════════
# TERMINAL FEATURES
# ═══════════════════════════════════════════════════════════════

# Shell integration (enables jump-to-prompt, etc.)
shell_integration enabled

# Copy on select (disabled for security)
copy_on_select no

# Confirm dangerous pastes
paste_actions quote-urls-at-prompt,confirm

# Allow hyperlinks
allow_hyperlinks yes

# Strip trailing spaces on copy
strip_trailing_spaces smart

# ═══════════════════════════════════════════════════════════════
# ADVANCED SETTINGS
# ═══════════════════════════════════════════════════════════════

# Enable remote control (for automation scripts)
allow_remote_control true

# Terminal type
term xterm-kitty

# Close window when child exits
close_on_child_death no

# Confirm before closing OS window with multiple tabs
confirm_os_window_close -1
